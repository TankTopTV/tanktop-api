<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Tanktop-api : Tank Top TV APIs" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Tanktop-api</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/TankTopTV/tanktop-api">View on GitHub</a>

          <h1 id="project_title">Tanktop-api</h1>
          <h2 id="project_tagline">Tank Top TV APIs</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/TankTopTV/tanktop-api/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/TankTopTV/tanktop-api/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="tank-top-tv-api" class="anchor" href="#tank-top-tv-api"><span class="octicon octicon-link"></span></a>Tank Top TV API</h1>

<p>Welcome to the Tank Top TV APIs.  These are free to use for non-commercial use within reasonable usage limits, but please get in touch with us at <a href="mailto:hello@tanktop.tv">hello@tanktop.tv</a> if you'd like to use them for commercial purposes.</p>

<p>You will need an API key.  Contact <a href="mailto:hello@tanktop.tv">hello@tanktop.tv</a> for details.</p>

<ol>
<li><a href="#Matching">Movie and TV matching API</a></li>
<li><a href="#Ingestion">TV and Movie Source Ingestion</a></li>
<li><a href="#UserProfiles">User Profiles</a></li>
<li><a href="#UserActions">User Actions and Events</a></li>
<li><a href="#PersonalizedLists">Personalised Movie &amp; TV lists</a></li>
<li><a href="#Recommendations">Recommendations</a></li>
<li><a href="#Search">Search &amp; typeahead</a></li>
</ol><p>We're still in the process of documenting our APIs but please get in touch if you're interested in using an endpoint that is not fully written-up yet.</p>

<h2>
<a name="api-usage" class="anchor" href="#api-usage"><span class="octicon octicon-link"></span></a>API usage</h2>

<p>You will need an API key.  Contact <a href="mailto:hello@tanktop.tv">hello@tanktop.tv</a> for details.</p>

<p>Data is returned in JSON format.</p>

<h2>
<a name="-movie-and-tv-matching-api" class="anchor" href="#-movie-and-tv-matching-api"><span class="octicon octicon-link"></span></a><a name="Matching"></a> Movie and TV matching API</h2>

<p>Use this API to match items in your catalog against the TankTop entertainment graph.</p>

<table>
<thead><tr>
<th align="left">Endpoint</th>
<th align="left">Function</th>
</tr></thead>
<tbody><tr>
<td align="left"><code>GET /api/1/&lt;apikey&gt;/match/&lt;itemtype&gt;/</code></td>
<td align="left">Get matches for a TV programme or movie</td>
</tr></tbody>
</table><p>Valid itemtypes are <code>movie</code> and <code>programme</code>.</p>

<h4>
<a name="parameters" class="anchor" href="#parameters"><span class="octicon octicon-link"></span></a>Parameters</h4>

<table>
<thead><tr>
<th align="left">Name</th>
<th align="left">Value</th>
<th align="center">Required</th>
</tr></thead>
<tbody>
<tr>
<td align="left">title</td>
<td align="left">Programme Title</td>
<td align="center">y</td>
</tr>
<tr>
<td align="left">year</td>
<td align="left">Year of first release</td>
<td align="center">n</td>
</tr>
<tr>
<td align="left">director</td>
<td align="left">Director (Movies only)</td>
<td align="center">n</td>
</tr>
<tr>
<td align="left">cast</td>
<td align="left">Cast members.  Any cast members you include help narrow down the match. Repeat the parameter to specify multiple cast members</td>
<td align="center">n</td>
</tr>
</tbody>
</table><h4>
<a name="return-values" class="anchor" href="#return-values"><span class="octicon octicon-link"></span></a>Return values</h4>

<table>
<thead><tr>
<th align="left">Name</th>
<th align="left">Description</th>
</tr></thead>
<tbody><tr>
<td align="left">match_type</td>
<td align="left">M, N or C.  M means there is a good match, N means there's no good match.  C means there are multiple good looking matches, but its too close to say which is correct</td>
</tr></tbody>
</table><p>If match_type is M the response contains the following additional fields</p>

<table>
<thead><tr>
<th align="left">Name</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr>
<td align="left">title</td>
<td align="left">title</td>
</tr>
<tr>
<td align="left">director</td>
<td align="left">Director - movies only</td>
</tr>
<tr>
<td align="left">year</td>
<td align="left">Year of first release</td>
</tr>
<tr>
<td align="left">tt_id</td>
<td align="left">TankTop ID for the item</td>
</tr>
<tr>
<td align="left">rt_id</td>
<td align="left">Rotten Tomatoes ID for the item (if available)</td>
</tr>
<tr>
<td align="left">imdb_id</td>
<td align="left">IMDB ID for the item (if available)</td>
</tr>
</tbody>
</table><p>If match_type is N or C then the response contains the following additional fields</p>

<table>
<thead><tr>
<th align="left">Name</th>
<th align="left">Description</th>
</tr></thead>
<tbody><tr>
<td align="left">candidates</td>
<td align="left">An array of candidate matches, best first</td>
</tr></tbody>
</table><p>The array contains elements with the following fields</p>

<table>
<thead><tr>
<th align="left">Name</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr>
<td align="left">score</td>
<td align="left">match score.  Higher is better.  Anything above 3 is considered a reasonable match</td>
</tr>
<tr>
<td align="left">debug</td>
<td align="left">An array of strings detailing the progress of this match</td>
</tr>
<tr>
<td align="left">title</td>
<td align="left">title</td>
</tr>
<tr>
<td align="left">director</td>
<td align="left">Director - movies only</td>
</tr>
<tr>
<td align="left">year</td>
<td align="left">Year of first release</td>
</tr>
<tr>
<td align="left">tt_id</td>
<td align="left">Tanktop ID for the item</td>
</tr>
<tr>
<td align="left">rt_id</td>
<td align="left">Rotten Tomatoes ID for the item (if available)</td>
</tr>
<tr>
<td align="left">imdb_id</td>
<td align="left">IMDB ID for the item (if available)</td>
</tr>
</tbody>
</table><h4>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h4>

<h5>
<a name="request" class="anchor" href="#request"><span class="octicon octicon-link"></span></a>Request</h5>

<p><code>http://movies.tanktop.tv/api/1/&lt;apikey&gt;/match/movie/?title=The%20Hunger%20Games&amp;director=Gary%20Ross&amp;year=2012</code></p>

<h5>
<a name="response" class="anchor" href="#response"><span class="octicon octicon-link"></span></a>Response</h5>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="err">director:</span> <span class="nt">"Gary Ross"</span><span class="p">,</span>
    <span class="err">imdb_id:</span> <span class="nt">"1392170"</span><span class="p">,</span>
    <span class="err">match_type:</span> <span class="nt">"M"</span><span class="p">,</span>
    <span class="err">rt_id:</span> <span class="err">771190618,</span>
    <span class="err">title:</span> <span class="nt">"The Hunger Games"</span><span class="p">,</span>
    <span class="err">tt_id:</span> <span class="err">2108,</span>
    <span class="err">year:</span> <span class="err">2012</span>
<span class="p">}</span>
</pre></div>

<h5>
<a name="request-1" class="anchor" href="#request-1"><span class="octicon octicon-link"></span></a>Request</h5>

<p><code>http://movies.tanktop.tv/api/1/&lt;apikey&gt;/match/programme/?title=Vikings&amp;cast=Travis+Fimmel&amp;cast=Clive+Standen</code></p>

<h5>
<a name="response-1" class="anchor" href="#response-1"><span class="octicon octicon-link"></span></a>Response</h5>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="err">imdb_id:</span> <span class="nt">"tt2306299"</span><span class="p">,</span>
    <span class="err">match_type:</span> <span class="nt">"M"</span><span class="p">,</span>
    <span class="err">title:</span> <span class="nt">"Vikings"</span><span class="p">,</span>
    <span class="err">tt_id:</span> <span class="err">268,</span>
    <span class="err">tvdb_id:</span> <span class="err">260449,</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="matching-and-ingestion-service" class="anchor" href="#matching-and-ingestion-service"><span class="octicon octicon-link"></span></a>Matching and ingestion service</h3>

<p>Provide us with a catalog feed or API and we will match and ingest it for you.</p>

<h2>
<a name="-tv-and-movie-source-ingestion" class="anchor" href="#-tv-and-movie-source-ingestion"><span class="octicon octicon-link"></span></a><a name="Ingestion"></a> TV and Movie Source Ingestion</h2>

<p>Tell TankTop about your Movie and TV catalog so that we can list it in our public services and/or in your white-label UI.  Please contact us to be allocated a source ID.</p>

<table>
<thead><tr>
<th align="left">Endpoint</th>
<th align="left">Function</th>
</tr></thead>
<tbody><tr>
<td align="left"><code>POST /api/1/&lt;apikey&gt;/ingest/&lt;sourceid&gt;/</code></td>
<td align="left">Set the current contents for a TV and Movie source</td>
</tr></tbody>
</table><p>Post a JSON body to set the current contents of the source</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="err">timestamp:</span> <span class="err">&lt;Format?&gt;</span>
    <span class="err">tv:</span> <span class="err">[]</span>
    <span class="err">movies:</span> <span class="err">[]</span>
<span class="p">}</span>
</pre></div>

<h3>
<a name="tv-format" class="anchor" href="#tv-format"><span class="octicon octicon-link"></span></a>TV format</h3>

<p>Documentation coming soon.</p>

<h3>
<a name="movie-format" class="anchor" href="#movie-format"><span class="octicon octicon-link"></span></a>Movie format</h3>

<p>Documentation coming soon.</p>

<h2>
<a name="tv-programme-and-movie-data" class="anchor" href="#tv-programme-and-movie-data"><span class="octicon octicon-link"></span></a>TV Programme and Movie data</h2>

<p>Get metadata for the movies &amp; TV shows.</p>

<p><strong>Note</strong>: This does not include synopses or images.</p>

<table>
<thead><tr>
<th align="left">Endpoint</th>
<th align="left">Function</th>
</tr></thead>
<tbody>
<tr>
<td align="left"><code>GET /api/1/&lt;apikey&gt;/&lt;itemtype&gt;/&lt;itemid&gt;/</code></td>
<td align="left">Get metadata for a single item</td>
</tr>
<tr>
<td align="left"><code>GET /api/1/&lt;apikey&gt;/&lt;itemtype&gt;/?id=X&amp;id=Y</code></td>
<td align="left">Get metadata for a number of items</td>
</tr>
</tbody>
</table><p>Metadata format documentation coming soon.</p>

<h2>
<a name="-user-profiles" class="anchor" href="#-user-profiles"><span class="octicon octicon-link"></span></a><a name="UserProfiles"></a> User Profiles</h2>

<p>User profiles are only visible to the service that creates them.  The service may provide their own user IDs.</p>

<table>
<thead><tr>
<th align="left">Endpoint</th>
<th align="left">Function</th>
</tr></thead>
<tbody>
<tr>
<td align="left"><code>PUT /api/1/&lt;apikey&gt;/user/&lt;userid&gt;/</code></td>
<td align="left">create a user using your user id and set its initial profile</td>
</tr>
<tr>
<td align="left"><code>POST /api/1/&lt;apikey&gt;/user/</code></td>
<td align="left">create a user, we'll choose the user id</td>
</tr>
<tr>
<td align="left"><code>PATCH /api/1/&lt;apikey&gt;/user/&lt;userid&gt;/</code></td>
<td align="left">update an existing user profile</td>
</tr>
<tr>
<td align="left"><code>POST /api/1/&lt;apikey&gt;/user/&lt;userid&gt;/</code></td>
<td align="left">update an existing user profile</td>
</tr>
<tr>
<td align="left"><code>GET /api/1/&lt;apikey&gt;/user/&lt;userid&gt;/</code></td>
<td align="left">retrieve user profile</td>
</tr>
<tr>
<td align="left"><code>DELETE /api/1/&lt;apikey&gt;/user/&lt;userid&gt;/</code></td>
<td align="left">deactivate a user</td>
</tr>
</tbody>
</table><p>The user profile is a set of key, value pairs.  Certain keys have meaning to the system, but arbitrary pairs may be
stored. Keys beginning with _ are reserved.</p>

<table>
<thead><tr>
<th align="left">key</th>
<th align="left">value</th>
</tr></thead>
<tbody><tr>
<td align="left">id</td>
<td align="left">user ID corresponding to the profile</td>
</tr></tbody>
</table><h2>
<a name="-user-actions-and-events" class="anchor" href="#-user-actions-and-events"><span class="octicon octicon-link"></span></a><a name="UserActions"></a> User Actions and Events</h2>

<p>This is for tracking events that take place on your system so that user actions can feed into personalized listings and recommendations, as well as into analytics tracking.</p>

<table>
<thead><tr>
<th align="left">Endpoint</th>
<th align="left">Function</th>
</tr></thead>
<tbody>
<tr>
<td align="left"><code>POST /api/1/&lt;apikey&gt;/event/&lt;userid&gt;/&lt;eventname&gt;/&lt;itemtype&gt;/&lt;itemid&gt;/[&lt;value&gt;/]</code></td>
<td align="left">Create an event or add to a list</td>
</tr>
<tr>
<td align="left"><code>DELETE /api/1/&lt;apikey&gt;/event/&lt;userid&gt;/&lt;eventname&gt;/&lt;itemtype&gt;/&lt;itemid&gt;/</code></td>
<td align="left">Delete an event or remove from a list</td>
</tr>
<tr>
<td align="left"><code>GET /api/1/&lt;apikey&gt;/event/&lt;userid&gt;/&lt;eventname&gt;/&lt;itemtype&gt;/</code></td>
<td align="left">Get the items in a list, or for which an event has happened</td>
</tr>
</tbody>
</table><p>POST to add to a list, DELETE to remove, GET returns the items currently in a list</p>

<h3>
<a name="event-descriptions" class="anchor" href="#event-descriptions"><span class="octicon octicon-link"></span></a>Event descriptions</h3>

<p>Documentation coming soon.</p>

<h2>
<a name="-personalized-movie-and-tv-lists" class="anchor" href="#-personalized-movie-and-tv-lists"><span class="octicon octicon-link"></span></a><a name="PersonalizedLists"></a> Personalized Movie and TV lists</h2>

<p>Get personalized listings for movie &amp; TV shows.  This is the list of available shows on your services, not including seen or hidden items, taking into account your category preferences, and ordered according to goodness, recency, category balance - essentially this is the 'magic' personalized lists of things available to you, ordered according to what you might be most interested to watch.</p>

<table>
<thead><tr>
<th align="left">Endpoint</th>
<th align="left">Function</th>
</tr></thead>
<tbody>
<tr>
<td align="left"><code>GET /api/1/&lt;apikey&gt;/list/&lt;userid&gt;/&lt;itemtype&gt;/</code></td>
<td align="left">Get the personalized item list for the user</td>
</tr>
<tr>
<td align="left"><code>GET /api/1/&lt;apikey&gt;/list/_/&lt;itemtype&gt;/</code></td>
<td align="left">Get the best item list for anonymous users</td>
</tr>
</tbody>
</table><p>Return value is a list of ids.  Can also expand that to include metadata associated with the ID, and list inclusion data for specified events.  E.g. you could ask for the first 12 movie IDs, get the catalog metadata for them, and whether the user has rated the items or added them to their watchlist.</p>

<h2>
<a name="-recommendations" class="anchor" href="#-recommendations"><span class="octicon octicon-link"></span></a><a name="Recommendations"></a> Recommendations</h2>

<ul>
<li>Item-item similarity</li>
<li>Recommended items for a user</li>
</ul><p>Documentation coming soon.</p>

<p>See also <a href="#PersonalizedLists">Personalized Lists</a>.</p>

<h2>
<a name="-search-and-typeahead" class="anchor" href="#-search-and-typeahead"><span class="octicon octicon-link"></span></a><a name="Search"></a> Search and Typeahead</h2>

<p>Documentation coming soon.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Tanktop-api maintained by <a href="https://github.com/TankTopTV">TankTopTV</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-32505739-8");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
